<!doctype html><html lang=ru-ru><head><meta charset=utf-8><title>Преимущества Event Sourcing архитектуры</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Event Sourcing + CQRS: какие преимущества эта архитектура дает по сравнению с классическим подходом CRUD"><meta name=generator content="Hugo 0.83.1"><link rel=stylesheet href=https://heeus.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://heeus.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://heeus.io/plugins/magnific-popup/magnific-popup.css><link rel=stylesheet href=https://heeus.io/plugins/slick/slick.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Anaheim%7cQuattrocento+Sans:400,700&display=swap"><link rel=stylesheet href=https://heeus.io/css/style.min.css media=screen><link rel=stylesheet href=https://heeus.io/css/custom.min.css media=screen><link rel="shortcut icon" href=https://heeus.io/images/favicon.png type=image/x-icon><link rel=icon href=https://heeus.io/images/favicon.png type=image/x-icon><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=PT+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-W113C1YZYH"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-W113C1YZYH')</script></head><body id=body data-spy=scroll data-target=.navbar data-offset=55><div id=content><section class="sticky-top navigation"><div class=container><nav class="navbar navbar-expand-lg navbar-dark"><a class="navbar-brand p-0" href=/ru><img class=lozad data-src=https://heeus.io/images/logo.png alt="Heeus - Платформа облачных приложений" height=42></a>
<button class="navbar-toggler rounded-0" type=button data-toggle=collapse data-target=#navigation>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://heeus.io/ru/></a></li></ul><select id=select-language onchange="location=this.value"><option id=en value=https://heeus.io/blog/event-sourcing/>En</option><option id=ru value=https://heeus.io/ru/blog/event-sourcing/ selected>Ru</option></select></div></nav></div></section><section class=section><div class=container><div class=row><div class="col-lg-8 offset-lg-2 text-center"><h1>Преимущества Event Sourcing архитектуры</h1><ul class="list-inline mb-50"><li>Михаил Сайгаченко, Heeus Team</li><li>23.04.2021</li></ul><div class=post-img-row><div class="post-img mb-50"><img class="img-fluid lozad" data-src=https://heeus.io/images/blog/database-1.png alt=blog-image></div></div></div><div class="col-lg-8 offset-lg-2"><div class=post-single-content><h2 id=вступление>Вступление</h2><p>Event Sourcing - относительно молодой подход в построении архитектуры хранения данных приложений. Пожалуй, чаще всего в качестве первого источника, подробно описывающего принципы архитектуры упоминают <a href=https://martinfowler.com/eaaDev/EventSourcing.html>статью Мартина Фаулера</a>, известного автора книг и статей в области разработки ПО. В сети также можно найти ряд статей на эту тему, как на русском, так и на английском. Тем не менее, поскольку Event Sourcing и CQRS имеет прямое отношение с к проекту Heeus, мы (авторы проекта) посчитали нужным опубликовать обзорную статью про эту архитектуру и в нашем блоге.</p><h2 id=суть-event-sourcing>Суть Event Sourcing</h2><p>Вплоть до текущего момента преобладающим подходом в организации хранения и доступа к данным был и остается так называемый CRUD (аббревиатура от Create-Read-Update-Delete, по названию основных процедур доступа к данным). В классическом подходе в БД хранятся(преимущественно) только финальные состояния объектов. Иными словами, если к объекту применяется ряд модификаций, то БД содержит только состояние объекта после последнего изменения.</p><p>В отличие от CRUD, Event Sourcing провозглашает, можно сказать, противоположный подход: все действия, создающие или изменяющие объекты, последовательно сохраняются в БД в виде событий, формируя в базе так называемый Event Log (журнал событий). Состояние того или иного объекта, как и всей системы целиком, на любой момент времени может быть получено путем вычисления, а именно - путем &ldquo;проигрывания&rdquo; событий журнала и последовательного применения событий. Такая архитектура намного сложнее в разработке, чем системы на базе CRUD, но в конечном итоге имеет ряд неоспоримых преимуществ.</p><h2 id=что-такое-cqrs>Что такое CQRS</h2><p>CQRS - аббревиатура от Command Query Responsibility Segregation, буквально - разделение ответственности на команды и запросы. Данный шаблон проектирования системы в применении к Event Sourcing означает, что запросы на чтение не оперируют напрямую с журналом событий (Event Log), а берутся из специального хранилища, формируемого на основании обработки журнала событий, и оптимизированного для операций чтения. Это улучшает производительность системы, масштабируемость и безопасность.</p><p><img src=/images/blog/202104-cqrs1.png alt="CQRS и Event Sourcing"><div style=text-align:center;margin-top:-1.5rem;margin-bottom:2rem>источник: <a href=https://sensetecnic.com/cqrs-and-event-sourcing-for-the-iot/ target=_blank>https://sensetecnic.com/cqrs-and-event-sourcing-for-the-iot/</a></div></p><h2 id=зачем-все-это>Зачем все это</h2><p>Предположим, что у нас имеется платформа, построенная на базе архитектуры Event Sourcing + CQRS, позволяющая размещать и запускать пользовательские микросервисы. Какие преимущества дает использование именно такой архитектуры для размещения микросервисов?</p><ul><li>Такая система в целом значительно более предсказуема и масштабируема.</li><li>В основе данных - журнал событий, соответственно такая архитектура по определению идеально подходит для любых приложений, где требуется журнал аудита: торговля, управление задачами, рестораны/отели, склады, интернет вещей, и так далее.</li><li>Система более устойчива к сбоям.</li><li>Система на базе архитектуры CQRS может быть высокопроизводительной даже на относительно слабом оборудовании.</li><li>Приложения/микросервисы, оперирующие данными по технологии CQRS, значительно проще тестировать и отлаживать.</li></ul><h2 id=ссылки>Ссылки</h2><ul><li><a href=https://martinfowler.com/eaaDev/EventSourcing.html>https://martinfowler.com/eaaDev/EventSourcing.html</a></li><li><a href=https://habr.com/ru/post/146429/>https://habr.com/ru/post/146429/</a> и <a href=https://habr.com/ru/post/149464/>https://habr.com/ru/post/149464/</a></li><li><a href=https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing>https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing</a></li></ul></div><div class=text-center><a class="btn btn-transparent" href=javascript:history.back()>Назад</a></div><div class=mt-5></div></div></div></div></section></div><footer id=footer class=section-bg><div class=container><div class="row wow fadeInUp" data-wow-duration=500ms><div class=col-xl-12><div class="copyright text-center"><a href=https://heeus.io/ru/><img src=https://heeus.io/images/logo.png alt="Heeus - Платформа облачных приложений" height=42></a><br><p>Copyright © 2020-2021 Heeus Authors</p></div></div></div></div></footer><script src=https://heeus.io/plugins/jquery/jquery.min.js></script><script src=https://heeus.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://heeus.io/plugins/slick/slick.min.js></script><script src=https://heeus.io/plugins/shuffle/shuffle.min.js></script><script src=https://heeus.io/plugins/magnific-popup/jquery.magnific-popup.min.js></script><script src=https://heeus.io/plugins/lazy-load/lozad.min.js></script><script src=https://heeus.io/plugins/google-map/map.js></script><script src=https://heeus.io/js/script.min.dfda07d67e5db1f94983c10b2d63fffe981b4255494e79874f525fe100789ebb633dfc9a4d787ca1cae962ef83ea91d5.js integrity=sha384-39oH1n5dsflJg8ELLWP//pgbQlVJTnmHT1Jf4QB4nrtjPfyaTXh8ocrpYu+D6pHV></script></body></html>